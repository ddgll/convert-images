var L=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var a=(e,t,s)=>(L(e,t,"read from private field"),s?s.call(e):t.get(e)),m=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},v=(e,t,s,i)=>(L(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s);(function(e,t){typeof exports=="object"&&typeof module!="undefined"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e.ConvertImages={}))})(this,function(e){var i,l,f,g;"use strict";var t=(o=>(o.Webp="webp",o.Png="png",o.Jpeg="jpeg",o.Gif="gif",o.Bmp="bmp",o))(t||{});class s{constructor(){m(this,i,void 0);m(this,l,void 0);m(this,f,(d,n,h,c)=>{if(!h&&!c)return 1;const r=(h||c||400)/d,u=(c||h||400)/n;return r>u?u:r});m(this,g,(d,n,h)=>()=>{if(!a(this,l))return;const c=n&&n.type?n.type:t.Webp,r=n&&n.name?n.name:"image",u=a(this,f).call(this,d.width,d.height,n?n.width:null,n?n.height:null);a(this,i).width=d.width*u,a(this,i).height=d.height*u,a(this,l).drawImage(d,0,0,a(this,i).width,a(this,i).height);const w=a(this,i).toDataURL(`image/${c}`);if(!n||!n.download)return h(w);const b=document.createElement("a");b.href=w,b.download=`${r}.${c}`,b.click(),h(w)});v(this,i,document.createElement("canvas")),v(this,l,a(this,i).getContext("2d")),document.body.append(a(this,i))}convertImageFromUrl(d,n){return d?new Promise((h,c)=>{const r=new Image;r.crossOrigin="anonymous",r.addEventListener("load",a(this,g).call(this,r,n||{},h).bind(this)),r.addEventListener("error",c),r.src=d}):Promise.reject("No Url")}convertImageFromFile(d,n){return new Promise((h,c)=>{const r=new FileReader;r.addEventListener("load",()=>{const u=r.result;this.convertImageFromUrl(u,n).then(h).catch(c)},!1),r.addEventListener("error",c),r.readAsDataURL(d)})}}i=new WeakMap,l=new WeakMap,f=new WeakMap,g=new WeakMap,e.ConvertImage=s,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"});
